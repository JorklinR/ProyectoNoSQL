@model NoSQL_Proyecto.Models.RegisterViewModel

@{
    Layout = null;
}

<link rel="apple-touch-icon" sizes="76x76" href="~/apple-icon.png">
<link rel="icon" type="image/png" href="~/favicon.png">
<!--     Fonts and icons     -->
<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
<!-- Nucleo Icons -->
<link href="~/css/nucleo-icons.css" rel="stylesheet" />
<link href="~/css/nucleo-svg.css" rel="stylesheet" />
<!-- Font Awesome Icons -->
<script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
<link href="~/css/nucleo-svg.css" rel="stylesheet" />
<!-- CSS Files -->
<link id="pagestyle" href="~/css/argon-dashboard.css?v=2.0.4" rel="stylesheet" />

<main class="main-content  mt-0">
    <div class="page-header align-items-start min-vh-50 pt-5 pb-11 m-3 border-radius-lg" style="background-image: url('https://img.freepik.com/fotos-premium/color-ano-muy-peri-fondo-azul-abstracto-colores-azul-claro-capas-formas-triangulares-diseno-fondo-azul-abstracto-moderno-material-transparente-blanco-texturizado-triangulo_256259-1985.jpg?w=1380'); background-position: top;">
            <span class="mask bg-gradient-dark opacity-6"></span>
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-5 text-center mx-auto">
                        <h1 class="text-white mb-2 mt-5">¡Bienvenido!</h1>
                        <p class="text-lead text-white">Ingresa tus datos para registrarte y poder utilizar nuestros servicios.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="row mt-lg-n10 mt-md-n11 mt-n10 justify-content-center">
                <div class="col-xl-4 col-lg-5 col-md-7 mx-auto">    
                    <div class="card z-index-0">
                        <div class="card-header text-center pt-4">
                            <h5>Registrarse</h5>
                        </div>
                       
                        <div class="card-body">
                        <form method="post" asp-action="Register">
                                <div class="mb-3">
                                      <input asp-for="Username" type="text" class="form-control" placeholder="Usuario" aria-label="Name">
                                </div>
                                <div class="mb-3">
                                      <input asp-for="Mail" type="email" class="form-control" placeholder="Correo" aria-label="Email">
                                </div>
                                <div class="mb-3">
                                      <input asp-for="Password" type="password" class="form-control" placeholder="Contraseña" aria-label="Password">
                                </div>
                   
                                <div class="text-center">
                                <button type="submit" class="btn bg-gradient-dark w-100 my-4 mb-2">Crear usuario</button>
                                </div>
                                <p class="text-sm mt-3 mb-0">¿Ya tienes una cuenta? <a href="@Url.Action("Login","Account")" class="text-dark font-weight-bolder">Iniciar sesión</a></p>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>


   <script>
    handleRegisterResponse('@ViewBag.Success');
</script>

    <!--   Core JS Files   -->

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
<script>
    @if (ViewBag.Success != null && (bool)ViewBag.Success)
    {
        // Mostrar SweetAlert si el registro fue exitoso
        <text>
            Swal.fire({
                icon: 'success',
                title: '¡Registro exitoso!',
                text: 'Tu cuenta ha sido creada correctamente.',
                showConfirmButton: false,
                timer: 2000
            }).then(() => {
                // Redirigir al usuario a la página de inicio de sesión
                window.location.href = '@Url.Action("Login", "Account")';
            });
        </text>
    }
    else if (ViewBag.Success != null && !(bool)ViewBag.Success)
    {
        // Mostrar SweetAlert si el registro falló
        <text>
            Swal.fire({
                icon: 'error',
                title: '¡Error en el registro!',
                text: 'Hubo un problema al intentar registrar tu cuenta, el usuario ya existe.',
                showConfirmButton: true
            });
        </text>
    }
</script>


    <script src="../assets/js/core/popper.min.js"></script>
    <script src="../assets/js/core/bootstrap.min.js"></script>
    <script src="../assets/js/plugins/perfect-scrollbar.min.js"></script>
    <script src="../assets/js/plugins/smooth-scrollbar.min.js"></script>
    <script>
        var win = navigator.platform.indexOf('Win') > -1;
        if (win && document.querySelector('#sidenav-scrollbar')) {
            var options = {
                damping: '0.5'
            }
            Scrollbar.init(document.querySelector('#sidenav-scrollbar'), options);
        }
    </script>
    <!-- Github buttons -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <!-- Control Center for Soft Dashboard: parallax effects, scripts for the example pages etc -->
    <script src="../assets/js/argon-dashboard.min.js?v=2.0.4"></script>
